@import url('https://fonts.googleapis.com/css2?family=Inter:wght@200;300;400;500;600&family=Playfair+Display:ital,wght@0,400;1,400&family=Droid+Serif:ital,wght@0,400;0,700;1,400&family=DM+Mono:wght@300;400;500&display=swap');
@import "@mdxeditor/editor/style.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer utilities {
  .glass-panel {
    @apply backdrop-blur-[20px] border border-white/5;
  }
}

body {
  @apply bg-background-light dark:bg-background-dark text-gray-800 dark:text-gray-300 min-h-screen transition-colors duration-300 antialiased font-sans;
}

/* Custom Scrollbar for sleek look */
::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb {
  @apply bg-gray-300 dark:bg-gray-700 rounded-full;
}

::-webkit-scrollbar-thumb:hover {
  @apply bg-gray-400 dark:bg-gray-600;
}

/* Vertical Floating Toolbar Overrides */
.nulish-editor {
  position: relative;
  /* Context for absolute positioning relative to editor wrapper */
}

/* Target the toolbar directly */
.nulish-editor .mdxeditor-toolbar {
  position: fixed !important;
  /* Fixed to viewport means it floats with scroll */
  top: 100px !important;
  left: calc(50% + 420px) !important;
  /* Center + Half Width (384px) + Gap (36px) = Outside */
  margin-left: 0 !important;
  transform: none !important;

  /* Vertical Layout */
  display: flex !important;
  flex-direction: column !important;
  width: auto !important;
  height: auto !important;
  max-width: 44px !important;

  /* Reset horizontal spacing */
  gap: 8px !important;
  padding: 8px 4px !important;

  /* Styling */
  background: rgba(255, 255, 255, 0.8) !important;
  backdrop-filter: blur(10px);
  border: 1px solid #e5e7eb !important;
  border-radius: 999px !important;
  /* Pill shape */
  box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1) !important;
  z-index: 50;

  /* No Scrollbar */
  overflow: visible !important;
}

/* Force ALL nested groups AND their children to vertical */
.nulish-editor .mdxeditor-toolbar div[role="group"],
.nulish-editor .mdxeditor-toolbar div[class*="Group"],
.nulish-editor .mdxeditor-toolbar>div {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
  align-items: center !important;
  gap: 4px !important;
}

/* Hide original label of Block Type button but keep it readable for JS */
.nulish-editor .mdxeditor-toolbar button[aria-label="Block type"]>span:first-child {
  visibility: hidden;
  width: 0 !important;
  padding: 0 !important;
  position: absolute;
}

/* Style our custom label */
.nulish-editor .mdxeditor-toolbar button[aria-label="Block type"] .short-label {
  font-size: 13px;
  font-weight: 700;
  color: inherit;
  min-width: 24px;
  text-align: center;
  display: inline-block;
}

/* Dark mode styling */
.dark .nulish-editor .mdxeditor-toolbar {
  background: rgba(31, 41, 55, 0.8) !important;
  /* gray-800 */
  border-color: rgba(255, 255, 255, 0.1) !important;
}

/* Ensure buttons stack and size nicely */
.nulish-editor .mdxeditor-toolbar button {
  width: 32px !important;
  height: 32px !important;
  min-width: 32px !important;
  padding: 0 !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  flex-shrink: 0 !important;
  position: relative;
  /* Ensure stacking context for tooltips */
}

/* Fix tooltips to appear above toolbar */
.nulish-editor [role="tooltip"],
.nulish-editor .mdxeditor-toolbar [role="tooltip"],
[data-radix-tooltip-content] {
  z-index: 100 !important;
  /* Higher than toolbar's z-index: 50 */
}

/* CRITICAL: Fix Radix Popper wrapper z-index (default is only 3!) */
[data-radix-popper-content-wrapper],
.nulish-editor [data-radix-popper-content-wrapper] {
  z-index: 100 !important;
  /* Must be higher than toolbar's z-index: 50 */
}

/* ROOT CAUSE FIX: The popup-container has z-index: 2 which creates a stacking context.
   All children z-indexes only work WITHIN that context, not against toolbar (z-index: 50).
   We must increase the container's z-index to be higher than toolbar. */
.mdxeditor-popup-container,
.nulish-editor .mdxeditor-popup-container {
  z-index: 100 !important;
  /* This fixes both tooltips AND dropdown menus */
}

/* Additional fixes for dropdown menus */
.nulish-editor [role="menu"],
.nulish-editor [role="listbox"],
.mdxeditor-select-content,
._selectContainer_1e2ox_288 {
  z-index: 100 !important;
}

/* Force groups (UndoRedo, BoldItalic, etc.) to vertical */
.nulish-editor .mdxeditor-toolbar>div {
  display: flex !important;
  flex-direction: column !important;
  width: 100% !important;
  align-items: center !important;
  gap: 4px !important;
}

/* FIX: Link Dialog Buttons Invisible (White on White) */
button._primaryButton_1e2ox_507,
.nulish-editor button[type="submit"],
.nulish-editor .mdxeditor-popup-container button[type="submit"] {
  background-color: #000 !important;
  color: #fff !important;
  border: 1px solid #000 !important;
}

.dark button._primaryButton_1e2ox_507,
.dark .nulish-editor button[type="submit"],
.dark .nulish-editor .mdxeditor-popup-container button[type="submit"] {
  background-color: #fff !important;
  color: #000 !important;
  border: 1px solid #fff !important;
}

button._secondaryButton_1e2ox_508,
.nulish-editor button[type="button"]:not([role="tab"]),
.nulish-editor .mdxeditor-popup-container button[type="button"] {
  background-color: transparent !important;
  color: inherit !important;
  border: 1px solid #e5e7eb !important;
}

/* FIX: Checkbox Alignment - Verified Fix */
._listItemChecked_1tncs_73,
._listItemUnchecked_1tncs_74,
li.mdxeditor-list-item[role="checkbox"] {
  padding-left: 2.22rem !important;
  /* Adjusted for alignment */
  margin-left: 0 !important;
  margin-inline-start: 0 !important;
  position: relative !important;
  display: flex !important;
  /* Ensure flex behavior */
  align-items: flex-start !important;
}

._listItemUnchecked_1tncs_74::before,
._listItemChecked_1tncs_73::before,
li.mdxeditor-list-item[role="checkbox"]::before {
  left: 0.5rem !important;
  top: 0.375rem !important;
  position: absolute !important;
  transform: none !important;
  /* Reset any partial transforms */
}

/* Ensure global list styles don't break it */
.nulish-editor ul.mdxeditor-checkbox-list li {
  display: list-item !important;
  /* Reset to allow ::before positioning relative to LI */
  list-style: none !important;
}

/* Hide toolbar when toggled off */
.nulish-editor.hide-toolbar .mdxeditor-toolbar {
  display: none !important;
}